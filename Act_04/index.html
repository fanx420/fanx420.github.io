<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AOT</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap">
</head>
<style>
    body {
        font-family: 'Roboto', sans-serif;
    }

    .card {}

    .section {
        height: 100vh;
    }
</style>

<body data-bs-theme="dark">
    <div class="section1">
        <nav class="navbar navbar-expand-lg bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="index.html">Attack On titan database</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="search.html">Titans</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="section">
            <div class="row">
                <div class="col-12 mt-5">
                    <div class="text-center" style="margin-top: 300px;">
                        <h1>Welcome to the attack on titan database</h1>
                        <h3>Here you can find information about your favorite characters</h3>
                    </div>
                </div>
            </div>
        </div>

        <div class="section">
            <div class="container my-5">
                <div class="row">
                    <div class="col-12">
                        <h1>Characters</h1>
                        <p>Filter by category</p>
                        <div class="btn-group my-2" style="gap: 10px;" aria-label="Basic example">
                            <button id="btnAlive" type="button" class="btn btn-secondary btn-active">Alive</button>
                            <button id="btnDeceased" type="button" class="btn btn-secondary">Deceased</button>
                            <button id="btnUnknown" type="button" class="btn btn-secondary">Unknown</button>
                        </div>
                        <nav aria-label="Page navigation example">
                            <ul class="pagination">
                                <li class="page-item"><a class="page-link disabled" id="btnPrevious" onclick="previousPage()">Previous</a></li>
                                <li class="page-item"><a class="page-link" id="btnNext" onclick="nextPage()">Next</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="row g-4" id="container">
                </div>
                <div class="scrollTop" style=" position: fixed; bottom: 20px; right: 20px;">
                    <button id="scrollToTop" type="button" class="btn btn-primary" onclick="scrollToTop()"> Back to
                        top</button>
                </div>
            </div>
        </div>



        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
            integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
            crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
            integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
            crossorigin="anonymous"></script>



        <script>
            //fetching data
            const url = 'https://api.attackontitanapi.com/characters/';
            const colors = {
                "statuses": {
                    "Alive": "#4CAF50",
                    "Deceased": "#F44336",
                    "Unknown": "#9E9E9E"
                }
            };

            let allCharacters = [];

            var character = 15;
            var page = 1;

            const getData = async () => {
                allCharacters = [];
                for (var i = (((page - 1) * character) + 1); i <= page * character; i++) {
                    const response = await fetch(url + i);
                    const data = await response.json();
                    allCharacters.push(data);

                    renderCharacters(allCharacters);
                }
            }

            //displaying data
            function renderCharacters(characters) {
                var container = document.getElementById('container');
                container.innerHTML = '';

                characters.forEach(data => {
                    const statusColor = colors.statuses[data.status] || "#FFFFFF";
                    container.innerHTML += `
            <div class="col-12 col-md-6 col-lg-4">
                <div class="card" style="background-color:${statusColor}; height: 200px; overflow-y: scroll;">
                    <div class="card-body">
                        <h5 class="card-title">Name: ${data.name}</h5>
                        <p class="card-text">Status: ${data.status}</p>
                        <p class="card-text">Age: ${data.age}</p>
                        <p class="card-text">Roles: ${data.roles}</p>
                        <p class="card-text">Species:${data.species}</p>
                    </div>
                </div>
            </div>
        `;
                });
            }

            getData();
        </script>

        <script>
            //pagination
            var btnNext = document.getElementById('btnNext');
            var btnPrevious = document.getElementById('btnPrevious');
           function nextPage() {
               page += 1;
               if (page >14) {
                   page = 14;
               }

               if (page > 1) {
                   btnPrevious.classList.remove('disabled');
               }
               else {
                   btnPrevious.classList.add('disabled');
               }
               
               container.innerHTML = '';
               getData(page);
           }
           function previousPage() {
               page -= 1;
               if (page < 1) {
                   page = 1;
               }

               if (page < 14) {
                   btnNext.classList.remove('disabled');
               }
               else {
                   btnNext.classList.add('disabled');
               }
               
               container.innerHTML = '';
               getData(page);
           }


        </script>
        <script>
            //filtering data
            var btnAlive = document.getElementById('btnAlive');
            var btnDeceased = document.getElementById('btnDeceased');
            var btnUnknown = document.getElementById('btnUnknown');

            btnAlive.addEventListener('click', function () {
                filterByStatus('Alive');
            });

            btnDeceased.addEventListener('click', function () {
                filterByStatus('Deceased');
            });

            btnUnknown.addEventListener('click', function () {
                filterByStatus('Unknown');
            });
            function filterByStatus(status) {
                const filteredCharacters = allCharacters.filter(character => character.status === status);
                page = 1;
                renderCharacters(filteredCharacters);
            }

        </script>
        <script>
            window.onload = function () {
                window.onscroll = function () {
                    const scrollBtn = document.getElementById('scrollToTop');
                    if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
                        scrollBtn.style.display = 'block';
                    } else {
                        scrollBtn.style.display = 'none';
                    }
                }
            }
            function scrollToTop() {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'

                });

            }
        </script>
</body>

</html>